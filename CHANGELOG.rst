..
    This file is a part of sqliteimport <https://github.com/kurtmckee/sqliteimport>
    Copyright 2024-2025 Kurt McKee <contactme@kurtmckee.org>
    SPDX-License-Identifier: MIT

..
    This is the sqliteimport changelog.

    It is managed and updated by scriv during development.
    Do not edit this file directly.
    Instead, run "scriv create" to create a new changelog fragment.


Changelog
*********


Unreleased changes
==================

Please see the fragment files in the `changelog.d directory`_.

..  _changelog.d directory: https://github.com/kurtmckee/sqliteimport/tree/main/changelog.d


..  scriv-insert-here

.. _changelog-0.10.0:

0.10.0 - 2025-03-25
===================

Added
-----

*   Add preliminary support for displaying files and source lines in tracebacks.

.. _changelog-0.9.0:

0.9.0 - 2025-03-19
==================

Fixed
-----

*   Ensure that modules have a ``__file__`` attribute,
    and possibly a ``__cached__`` attribute.

    The Python data model docs make it clear that these attributes aren't guaranteed,
    but it is nevertheless common for authors to assume that ``__file__`` exists.

    The string value may not be usable for a specific purpose,
    but the attributes now exist with the correct type for increased compatibility.

.. _changelog-0.8.0:

0.8.0 - 2025-03-18
==================

Added
-----

*   Support namespace packages.

Fixed
-----

*   Fix a bug, and inconsistencies, in the ``describe`` command output.
*   Verify a distribution package exists in the database before claiming it does.

.. _changelog-0.7.0:

0.7.0 - 2025-03-10
==================

Added
-----

*   Add a subcommand, ``describe``, to print info about a database.
*   Add an alias for the CLI ``sqliteimport`` command: ``si``.

Development
-----------

*   Improve the isolation of compatibility code.

.. _changelog-0.6.0:

0.6.0 - 2025-02-18
==================

Added
-----

*   Compress all database content using the LZMA algorithm.

    sqliteimport now produces databases that are smaller than importable zip files.

*   Support compiling to, and loading from, pre-compiled bytecode in the database.

    Performance testing shows that sqliteimport now imports large dependency trees
    faster than standard filesystem-based imports.

*   Add a ``sqliteimport compile`` command to compile all Python source to bytecode.

    The command should be run for each Python interpreter that will be used
    by the application.

Development
-----------

*   Add a Powershell script to test performance on Windows.

.. _changelog-0.5.0:

0.5.0 - 2025-02-15
==================

Python support
--------------

*   Support PyPy 3.11.

Added
-----

*   Add initial support for bundling and loading Python bytecode (``.pyc`` files).

    Performance testing on Linux shows that loading from sqlite is now twice as fast.

    The implementation is currently inflexible:
    it binds the sqlite database to the Python version used to bundle it.

Documentation
-------------

*   Add the changelog and a colophon to the documentation.
*   Configure ReadtheDocs to use the ``dirhtml`` builder.
*   Update the links shown on PyPI.

Development
-----------

*   Fix test project regeneration, which broke when Poetry 2 was released.

    *   Migrate from Poetry to ``build`` to build the test project wheels.
    *   Pin the regeneration tool dependencies.
    *   Update the test projects' ``pyproject.toml`` files to use PEP 621 metadata keys.

*   Add a script to log performance comparisons across multiple importers,
    including source and bytecode files when imported from the filesystem,
    from sqlite, and from zip files with varying compression levels.

.. _changelog-0.4.0:

0.4.0 - 2025-02-06
==================

Added
-----

*   Auto-load files on the Python path that end with ``.sqlite3``.

Fixed
-----

*   Pin the build system requirement to ``poetry-core`` v2.

Documentation
-------------

*   Document compatible flake8 and isort configurations.

.. _changelog-0.3.0:

0.3.0 - 2025-01-29
==================

Python support
--------------

*   Test against Python 3.14 pre-releases.
*   Drop Python 3.8 support.
*   Drop PyPy 3.9 support.

Added
-----

*   Add a database index to improve import performance.
*   Support calls to ``importlib.metadata.version()``.
*   Partially support accessing resources in packages.
*   Support binary files (like non-UTF-8 Python modules) and resources.

Fixed
-----

*   Fix a bug in the bundling code that allowed non-Python files to be importable.

    Previously, a package containing a PEP 561 ``py.typed`` file
    would have an importable submodule named ``{package}.py``.

*   Fix a bug that prevented databases bundled on Windows from finding package metadata.

Changed
-------

*   Introduce a data access object to manage database interactions.
*   Create a ``sqliteimport`` table to store metadata about the database.
*   Bundle ``.dist-info/`` metadata directories into databases.

Documentation
-------------

*   Use an absolute URL to the banner in the README.

    This helps ensure that PyPI releases will render the README consistently.

Development
-----------

*   Test that Unicode filenames can be imported.
*   Add a script to generate a large Python package for performance testing.
*   Resolve a ``ResourceWarning`` in the test suite on Python 3.13.
*   Add CI testing.
*   Create a framework for testing bundling and importing.
*   Migrate to PEP 621 metadata in ``pyproject.toml``.
*   Create release PRs via a reusable workflow.

.. _changelog-0.2.0:

0.2.0 - 2024-05-23
==================

Added
-----

*   Add a ``cli`` extra.
*   Add a CLI command, ``sqliteimport bundle``, to assist with database generation.

.. _changelog-0.1.0:

0.1.0 - 2024-05-22
==================

Initial release
---------------

*   Support loading Python source code from a sqlite database.
